<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" href="slate-0.0.3/dist/css/slate.css">

	<script>
	//file:///Users/Marty/Documents/Programming/Websites/Pebble%20Configuration%20Page%20Generator/Test.html?id=3
	// startitem=1&header=hello%20world&wtf=dhajskda

		// var basePath = window.location.search.substring(1);

	    // Replace all %20 with spaces
		function replaceSpaces(text) {
	    	while (text.indexOf("%20") != -1) {
	    		text = text.replace("%20", ' ');
	    	}
	    	return text;
		}

		// get map of all parameters and their values
		var urlParam = window.location.search.substring(1);
		var splitParams = urlParam.split("&");
		console.log("Url Parameters = " + urlParam);
		console.log("Split url param = " + splitParams);


		var page = '<form id="main-form">';


		// loop through them and add them to the body appropriately
		for (var i = 0; i < splitParams.length; i++) {
			// seperate the key/value pair
			var pair = splitParams[i].split("=");
			console.log("Pair = [ " + pair[0] + ", " + pair[1] + " ]");

			// replace %20 with a space
			pair[1] = replaceSpaces(pair[1]);
			console.log("Param value with spaces = " + pair[1]);

			// check for the type of the of the item to be added			
			// add it to the new body text variable
			switch (pair[0]) {
				case "startitem":
					page += '<div class="item-container">';
					break;
				case "header":
					page += '<div class="item-container-header">';
					page += pair[1] + '</div>';
					break;
				case "paragraph":
					console.log("Adding a paragraph");
					page +='<div class="item-container-content">' + 
							'<div class="item">' +
								pair[1] + 
							'</div>' + 
						'</div>';
					break;
				case "enditem":
					page += '</div>';
					break;
			}
		}


		page += '<div class="item-container">' + 
				      '<div class="button-container">' + 
				        '<input type="button" class="item-button" value="SEND">' + 
				      '</div>' + 
				    '</div>' + 
				  '</form>';




	    window.onload = function(){
	    	
	    	console.log("in onload");


	    	
	    	console.log("page = " + page);

			document.body.innerHTML = page;
			console.log("It happened");

	    };


		// function getQueryVariable(path) {
		// 	var query = window.location.search.substring(1);
		// 	var vars = query.split("&");
		// 	for (var i = 0; i < vars.length; i++) {
		// 		var pair = vars[i].split("=");
		// 		console.log("Pair = [" + pair[0] + ", " + pair[1] + "]");
		// 		console.log("Comparing = [" + pair[0] + ", " + path + "]");
		// 		console.log("Type " + typeof(pair[0]) + ", " + typeof(path));
		// 		if(pair[0] == path) {
		// 			console.log("it happened");
		// 			return pair[1];
		// 		}
		// 	}
		// 	return false;
		// }

		// var x = getQueryVariable("id"); 
		// console.log(x);

	 //    window.onload = function(){
	    	
	 //    	console.log("in onload");

	 //    	// Replace all %20 with spaces
	 //    	while (x.indexOf("%20") != -1) {
	 //    		x = x.replace("%20", ' ');
	 //    		console.log("x = " + x);
	 //    	}

	 //    	var body = document.body;

		// 	var newText = '<div class="item-container"><div class="item-container-content"><div class="item">';
		// 	newText += x;
		// 	newText += '</div></div></div>';
		// 	document.body.innerHTML = newText;
		// 	console.log("It happened");

	 //    }

	</script>
</head>
<body>

in testing


</body>
</html>